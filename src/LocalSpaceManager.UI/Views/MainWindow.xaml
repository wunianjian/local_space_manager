<Window x:Class="LocalSpaceManager.UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Local Space Manager" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Toolbar -->
        <ToolBar Grid.Row="0" Padding="5">
            <Button Command="{Binding StartScanCommand}" Padding="10,5">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ”" FontSize="16" Margin="0,0,5,0"/>
                    <TextBlock Text="Scan Drives" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            <Separator/>
            <Button Command="{Binding RefreshCommand}" Padding="10,5">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ”„" FontSize="16" Margin="0,0,5,0"/>
                    <TextBlock Text="Refresh" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            <Separator/>
            <TextBlock Text="Sort by:" VerticalAlignment="Center" Margin="10,0,5,0"/>
            <Button Command="{Binding SortBySizeCommand}" Padding="10,5">
                <TextBlock Text="Size"/>
            </Button>
            <Button Command="{Binding SortByDateCommand}" Padding="10,5">
                <TextBlock Text="Modified Date"/>
            </Button>
        </ToolBar>
        
        <!-- File List -->
        <DataGrid Grid.Row="1" 
                  ItemsSource="{Binding Files}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  GridLinesVisibility="Horizontal"
                  AlternatingRowBackground="#F5F5F5"
                  RowHeight="30"
                  VirtualizingPanel.IsVirtualizing="True"
                  VirtualizingPanel.VirtualizationMode="Recycling"
                  EnableRowVirtualization="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="File Name" Binding="{Binding FileName}" Width="*" MinWidth="200"/>
                <DataGridTextColumn Header="Directory" Binding="{Binding DirectoryPath}" Width="2*" MinWidth="300"/>
                <DataGridTextColumn Header="Size" Binding="{Binding FormattedSize}" Width="100">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Modified Date" Binding="{Binding ModifiedDate, StringFormat='{}{0:yyyy-MM-dd HH:mm:ss}'}" Width="150"/>
                <DataGridTextColumn Header="Extension" Binding="{Binding Extension}" Width="80"/>
            </DataGrid.Columns>
        </DataGrid>
        
        <!-- Status Bar -->
        <StatusBar Grid.Row="2" Padding="5">
            <StatusBarItem>
                <TextBlock Text="{Binding StatusMessage}"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem HorizontalAlignment="Right">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Monitoring: "/>
                    <TextBlock Text="Active" Foreground="Green" FontWeight="Bold" Margin="5,0,0,0"/>
                </StackPanel>
            </StatusBarItem>
        </StatusBar>
        
        <!-- Loading Overlay -->
        <Grid Grid.Row="0" Grid.RowSpan="3" 
              Background="#80000000" 
              Visibility="{Binding IsScanning, Converter={StaticResource BoolToVisibilityConverter}}">
            <Border Background="White" 
                    CornerRadius="10" 
                    Padding="30"
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center">
                <StackPanel>
                    <TextBlock Text="Scanning..." FontSize="20" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <ProgressBar IsIndeterminate="True" Height="20" Width="200" Margin="0,10,0,0"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
    
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>
</Window>
